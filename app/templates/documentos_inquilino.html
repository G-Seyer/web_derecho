<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Subir documentos – Inquilino</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='estilos.css') }}?v=11">
  <style>
    .card.full{width:100%;max-width:100%}
    .page-docs .form-label{display:block;margin-bottom:.35rem}
    .page-docs input[type="file"]{display:block;width:100%}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .doc-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
    .doc-card{border:1px solid rgba(13,110,253,.12);border-radius:14px;padding:14px;background:#fff}
    .doc-status{display:flex;align-items:center;gap:.5rem}
    .doc-dot{width:.6rem;height:.6rem;border-radius:50%;background:#adb5bd;display:inline-block}
    .doc-card.ok .doc-dot{background:#198754}

    /* Fallback de collapse para el menú móvil (sin Bootstrap JS) */
    #navInq.collapse:not(.show){ display: none; }
    #navInq.collapse.show{ display: block; }
  </style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="/">AEPRA</a>

    <!-- Botón hamburguesa (móvil) -->
    <button class="navbar-toggler" type="button" aria-label="Abrir menú" onclick="toggleNavInq()">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Menú colapsable -->
    <div class="collapse navbar-collapse" id="navInq">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="/">Inicio</a></li>
        <li class="nav-item"><a class="nav-link" href="/#servicios">Servicios</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('routes.contacto') }}">Contacto</a></li>
        <li class="nav-item"><a class="nav-link" href="{{ url_for('routes.politicas') }}">Políticas</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container page-docs py-4">
  <h1 class="mb-4">Subir documentos – Inquilino (Arrendatario)</h1>

  <form method="POST" action="{{ url_for('routes.subir_inquilino') }}" enctype="multipart/form-data" id="form-inquilino">

    <!-- FOLIO -->
    <div class="card full mb-3">
      <div class="card-body">
        <label class="form-label">Folio asignado</label>
        <div class="d-flex gap-2 flex-wrap">
          <input type="text" name="folio" id="folio" class="form-control mono" style="max-width:360px"
                 placeholder="Ej. AEPRA-202508-AB12"
                 required
                 pattern="^AEPRA-\d{6}-[A-Z0-9]{4}$">
          <button class="btn btn-primary" type="button" id="btn-verificar">Verificar folio</button>
          <span id="folio-msg" class="align-self-center small text-muted">Debes verificar tu folio para habilitar el formulario.</span>
        </div>
      </div>
    </div>

    <!-- DATOS DEL INQUILINO -->
    <div class="card full mb-3">
      <div class="card-body">
        <h2 class="h6 mb-3">Datos del inquilino</h2>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nombre completo</label>
            <input type="text" name="nombre" class="form-control folio-locked" required disabled>
          </div>
          <div class="col-md-6">
            <label class="form-label">E-mail</label>
            <input type="email" name="correo" class="form-control folio-locked" required disabled>
            <div class="form-text small-hint">Acepta Gmail, Outlook, Yahoo, iCloud, etc.</div>
          </div>
          <div class="col-md-6">
            <label class="form-label">Dirección actual</label>
            <input type="text" name="direccion_actual" class="form-control folio-locked" placeholder="Calle Número Colonia" required disabled>
          </div>
          <div class="col-md-3">
            <label class="form-label">RFC</label>
            <input type="text" name="rfc" class="form-control folio-locked" maxlength="13" style="text-transform:uppercase" disabled>
          </div>
          <div class="col-md-3">
            <label class="form-label">CURP</label>
            <input type="text" name="curp" class="form-control folio-locked" maxlength="18" style="text-transform:uppercase" disabled>
          </div>
          <div class="col-md-4">
            <label class="form-label">Lugar y fecha de nacimiento</label>
            <input type="text" name="lugar_nacimiento" class="form-control folio-locked rounded-bottom-0" disabled>
            <input type="date" name="fecha_nacimiento" class="form-control folio-locked mt-0 rounded-top-0 border-top-0" disabled>
          </div>
          <div class="col-md-4">
            <label class="form-label">Teléfono</label>
            <input type="tel" name="telefono" class="form-control folio-locked" placeholder="55XXXXXXXX" disabled>
          </div>
        </div>
      </div>
    </div>

    <!-- EMPLEO -->
    <div class="card full mb-3">
      <div class="card-body">
        <h2 class="h6 mb-3">Datos de empleo</h2>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nombre de la fuente de empleo</label>
            <input type="text" name="empleo_nombre" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-6">
            <label class="form-label">Dirección de su fuente de empleo</label>
            <input type="text" name="empleo_direccion" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-4">
            <label class="form-label">Puesto</label>
            <input type="text" name="puesto" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-4">
            <label class="form-label">Monto de sus ingresos</label>
            <input type="number" step="0.01" name="ingresos" class="form-control folio-locked" placeholder="0.00" disabled>
          </div>
          <div class="col-md-4">
            <label class="form-label">Antigüedad</label>
            <input type="text" name="antiguedad" class="form-control folio-locked" placeholder="Ej. 2 años 3 meses" disabled>
          </div>
        </div>
      </div>
    </div>

    <!-- COHABITACIÓN -->
    <div class="card full mb-3">
      <div class="card-body">
        <h2 class="h6 mb-3">Personas que habitarán el inmueble</h2>
        <div class="row g-3">
          <div class="col-md-4">
            <label class="form-label">¿Cuántas personas habitarán?</label>
            <input type="number" min="1" name="num_habitantes" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-8">
            <label class="form-label">Nombres de las personas que habitarán</label>
            <textarea name="nombres_habitantes" class="form-control folio-locked" rows="2" placeholder="Separados por coma" disabled></textarea>
          </div>
          <div class="col-12">
            <label class="form-label">Fuente de empleo de cada persona</label>
            <textarea name="empleo_habitantes" class="form-control folio-locked" rows="2" placeholder="Una por línea, en el mismo orden de los nombres" disabled></textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- REFERENCIAS -->
    <div class="card full mb-3">
      <div class="card-body">
        <h2 class="h6 mb-3">Referencias</h2>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nombre de referencia 1</label>
            <input type="text" name="ref1_nombre" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-3">
            <label class="form-label">Relación con el interesado</label>
            <input type="text" name="ref1_relacion" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-3">
            <label class="form-label">Teléfono</label>
            <input type="tel" name="ref1_telefono" class="form-control folio-locked" disabled>
          </div>
          <div class="col-12">
            <label class="form-label">Dirección</label>
            <input type="text" name="ref1_direccion" class="form-control folio-locked" disabled>
          </div>
        </div>

        <hr class="my-3">

        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nombre de referencia 2</label>
            <input type="text" name="ref2_nombre" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-3">
            <label class="form-label">Relación con el interesado</label>
            <input type="text" name="ref2_relacion" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-3">
            <label class="form-label">Teléfono</label>
            <input type="tel" name="ref2_telefono" class="form-control folio-locked" disabled>
          </div>
          <div class="col-12">
            <label class="form-label">Dirección</label>
            <input type="text" name="ref2_direccion" class="form-control folio-locked" disabled>
          </div>
        </div>
      </div>
    </div>

    <!-- AVAL -->
    <div class="card full mb-3">
      <div class="card-body">
        <h2 class="h6 mb-3">Obligado solidario / Aval</h2>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nombre del aval</label>
            <input type="text" name="aval_nombre" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-6">
            <label class="form-label">Lugar y fecha de nacimiento</label>
            <input type="text" name="aval_lugar_fecha_nac" class="form-control folio-locked" placeholder="Ej. CDMX, 01/01/1980" disabled>
          </div>
          <div class="col-md-3">
            <label class="form-label">RFC</label>
            <input type="text" name="aval_rfc" class="form-control folio-locked" maxlength="13" style="text-transform:uppercase" disabled>
          </div>
          <div class="col-md-3">
            <label class="form-label">CURP</label>
            <input type="text" name="aval_curp" class="form-control folio-locked" maxlength="18" style="text-transform:uppercase" disabled>
          </div>
          <div class="col-md-4">
            <label class="form-label">Dirección</label>
            <input type="text" name="aval_direccion" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-2">
            <label class="form-label">Teléfono</label>
            <input type="tel" name="aval_telefono" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-6">
            <label class="form-label">Folio real de la propiedad en garantía</label>
            <input type="text" name="aval_folio_real" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-6">
            <label class="form-label">Lugar donde se registró la propiedad en garantía</label>
            <input type="text" name="aval_lugar_registro" class="form-control folio-locked" disabled>
          </div>
        </div>
      </div>
    </div>

    <!-- DATOS DEL INMUEBLE A RENTAR -->
    <div class="card full mb-3">
      <div class="card-body">
        <h2 class="h6 mb-3">Datos del inmueble a rentar</h2>
        <div class="row g-3">
          <div class="col-12">
            <label class="form-label">Dirección completa (del inmueble)</label>
            <!-- LIBRE: sin pattern, solo required -->
            <input type="text" name="direccion" class="form-control folio-locked"
                   placeholder="Escribe la dirección completa"
                   required disabled>
            <div class="form-text">
              Ejemplo: <code>Av. Paseo de la Reforma 350, Torre A, Piso 12, Col. Juárez, Alcaldía Cuauhtémoc, C.P. 06600, Ciudad de México</code>
            </div>
          </div>
          <div class="col-md-4">
            <label class="form-label">Tipo de inmueble</label>
            <input type="text" name="tipo_inmueble" class="form-control folio-locked" placeholder="Casa, depto, local..." disabled>
          </div>
          <div class="col-md-4">
            <label class="form-label">Precio de renta</label>
            <input type="number" step="0.01" name="precio_renta" class="form-control folio-locked" placeholder="0.00" disabled>
          </div>
          <div class="col-md-4">
            <label class="form-label">Fecha de inicio de la renta</label>
            <input type="date" name="fecha_inicio_renta" class="form-control folio-locked" disabled>
          </div>
          <div class="col-md-4">
            <label class="form-label">Fecha de firma del contrato</label>
            <input type="date" name="fecha_firma_contrato" class="form-control folio-locked" disabled>
          </div>
        </div>
      </div>
    </div>

    <!-- DOCUMENTOS A SUBIR -->
    <div class="doc-grid"><div class="doc-section-title" style="grid-column:1/-1; margin:8px 0 6px;">📁 <span class="h6 text-primary">Documentos del Inquilino</span></div>

      <div class="doc-card" data-field="identificacion">
        <div class="fw-semibold mb-1">🪪 Copia de identificación oficial vigente</div>
        <input id="identificacion" type="file" name="identificacion" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-2" data-for="identificacion">Sin archivo</div>
        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>

      <div class="doc-card" data-field="comprobante_domicilio_anterior_inquilino">
        <div class="fw-semibold mb-1">🏠 Comprobante de domicilio del inmueble donde vivía anteriormente (inquilino)</div>
        <input id="dom_ant_inq" type="file" name="comprobante_domicilio_anterior_inquilino" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-2" data-for="dom_ant_inq">Sin archivo</div>
        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>

      <!-- 3 inputs (uno por mes) para ingresos del INQUILINO -->
      <div class="doc-card" data-field="comprobante_ingresos_inquilino">
        <div class="fw-semibold mb-1">💼 Comprobante de ingresos (últimos 3 meses) – Inquilino</div>
        <label class="form-label small">Mes 1 (más reciente)</label>
        <input id="ing_inq_m1" type="file" name="comprobante_ingresos_inquilino_mes1" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-1" data-for="ing_inq_m1">Sin archivo</div>

        <label class="form-label small mt-2">Mes 2</label>
        <input id="ing_inq_m2" type="file" name="comprobante_ingresos_inquilino_mes2" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-1" data-for="ing_inq_m2">Sin archivo</div>

        <label class="form-label small mt-2">Mes 3</label>
        <input id="ing_inq_m3" type="file" name="comprobante_ingresos_inquilino_mes3" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-1" data-for="ing_inq_m3">Sin archivo</div>

        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>

      <div class="doc-divider" style="grid-column:1/-1;"><hr class="my-3"></div>
      <div class="doc-section-title" style="grid-column:1/-1; margin:0 0 6px;">🧷 <span class="h6 text-primary">Documentos del Aval</span></div>

      <div class="doc-card" data-field="identificacion_oficial_aval">
        <div class="fw-semibold mb-1">🪪 Copia de identificación oficial vigente del aval</div>
        <input id="id_aval" type="file" name="identificacion_oficial_aval" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-2" data-for="id_aval">Sin archivo</div>
        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>
      
      <div class="doc-card" data-field="predial_inmueble_aval">
        <div class="fw-semibold mb-1">🧾 Copia de predial del inmueble del aval</div>
        <input id="pred_av" type="file" name="predial_inmueble_aval" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-2" data-for="pred_av">Sin archivo</div>
        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>

      <div class="doc-card" data-field="escritura_inmueble_aval">
        <div class="fw-semibold mb-1">📄 Copia de escritura del inmueble del aval</div>
        <input id="esc_av" type="file" name="escritura_inmueble_aval" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-2" data-for="esc_av">Sin archivo</div>
        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>

      <div class="doc-card" data-field="domicilio_inmueble_aval">
        <div class="fw-semibold mb-1">🏠 Comprobante de domicilio del inmueble del aval</div>
        <input id="dom_av" type="file" name="domicilio_inmueble_aval" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-2" data-for="dom_av">Sin archivo</div>
        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>

      <div class="doc-card" data-field="folio_real_aval">
        <div class="fw-semibold mb-1">📘 Constancia de folio real del inmueble del aval</div>
        <input id="folio_real_av" type="file" name="folio_real_aval" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-2" data-for="folio_real_av">Sin archivo</div>
        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>

      <!-- 3 inputs (uno por mes) para ingresos del AVAL -->
      <div class="doc-card" data-field="comprobante_ingresos_aval">
        <div class="fw-semibold mb-1">💼 Comprobante de ingresos (últimos 3 meses) – Aval</div>
        <label class="form-label small">Mes 1 (más reciente)</label>
        <input id="ing_av_m1" type="file" name="comprobante_ingresos_aval_mes1" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-1" data-for="ing_av_m1">Sin archivo</div>

        <label class="form-label small mt-2">Mes 2</label>
        <input id="ing_av_m2" type="file" name="comprobante_ingresos_aval_mes2" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-1" data-for="ing_av_m2">Sin archivo</div>

        <label class="form-label small mt-2">Mes 3</label>
        <input id="ing_av_m3" type="file" name="comprobante_ingresos_aval_mes3" accept=".pdf,image/*" required class="folio-locked" disabled>
        <div class="doc-file small text-secondary mt-1" data-for="ing_av_m3">Sin archivo</div>

        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>

      <div class="doc-card" data-field="contrato_poder">
        <div class="fw-semibold mb-1">📑 Contrato o poder notarial (si es persona moral)</div>
        <div class="form-check mb-2">
          <input class="form-check-input" type="checkbox" id="pfisica">
          <label class="form-check-label" for="pfisica">En caso de ser persona física, marca esta casilla.</label>
        </div>
        <input id="contrato_poder" type="file" name="contrato_poder" accept=".pdf,image/*" class="folio-locked" >
        <div class="form-text">Requerido por defecto (persona moral). Si marcas “persona física”, se desactiva.</div>
        <div class="doc-file small text-secondary mt-2" data-for="contrato_poder">Sin archivo</div>
        <div class="doc-status mt-2"><span class="doc-dot"></span><span class="doc-text">Pendiente</span></div>
      </div>
    </div>

    <div class="mt-4">
      <button id="btn-inquilino" class="btn btn-primary" disabled>Enviar documentos</button>
      <a href="/" class="btn btn-secondary ms-2">Cancelar</a>
    </div>
  </form>
</div>

<!-- VALIDACIONES ESPECÍFICAS (correo libre; dirección libre) -->
<script>
  (function(){
    const form = document.getElementById('form-inquilino');
    const email = form.querySelector('input[name="correo"]');
    const dir   = form.querySelector('input[name="direccion"]');

    // Correo: aceptamos cualquier dominio; usamos la validación nativa de type="email"
    function validaEmailLibre(){
      const v = (email.value || '').trim();
      email.setCustomValidity('');
      if (v && !email.checkValidity()){
        email.setCustomValidity('Ingresa un correo válido (ej. nombre@dominio.com)');
      }
    }

    // Dirección libre: solo que no esté vacía (handled by required)
    function validaDireccionLibre(){
      dir.setCustomValidity('');
    }

    email.addEventListener('input', validaEmailLibre);
    dir.addEventListener('input', validaDireccionLibre);
  })();
</script>

<script>
(function(){
  const form = document.getElementById('form-inquilino');
  const folio = document.getElementById('folio');
  const btnVer = document.getElementById('btn-verificar');
  const msg = document.getElementById('folio-msg');
  const lockables = Array.from(document.querySelectorAll('.folio-locked'));
  const submitBtn = document.getElementById('btn-inquilino');

  function requiredFiles(){
    return Array.from(form.querySelectorAll('.doc-card input[type="file"][required]'));
  }
  function allFilesOk(){
    return requiredFiles().every(i => i.files && i.files.length>0);
  }
  function setLocked(lock){
    lockables.forEach(el => el.disabled = lock);
    submitBtn.disabled = lock || !allFilesOk();
    document.dispatchEvent(new CustomEvent(lock ? 'folio:lock' : 'folio:unlock'));
  }
  setLocked(true);

  btnVer.addEventListener('click', async ()=>{
    const v = folio.value.trim().toUpperCase();
    if(!/^AEPRA-\d{6}-[A-Z0-9]{4}$/.test(v)){
      msg.textContent='Formato inválido. Ejemplo: AEPRA-202508-AB12';
      msg.className='align-self-center small text-danger';
      setLocked(true);
      return;
    }
    try{
      const r = await fetch('/api/verificar-folio/' + encodeURIComponent(v));
      const j = await r.json();
      if(j.ok){
        msg.textContent='Folio verificado ✓';
        msg.className='align-self-center small text-success';
        setLocked(false);
        folio.value=v;
      }else{
        msg.textContent=j.msg||'Folio no válido';
        msg.className='align-self-center small text-danger';
        setLocked(true);
      }
    }catch(e){
      msg.textContent='No se pudo verificar en este momento';
      msg.className='align-self-center small text-danger';
      setLocked(true);
    }
  });

  // UX archivos (múltiples inputs por tarjeta)
  const inputs = Array.from(document.querySelectorAll('.doc-card input[type="file"]'));

  function shortName(name){ if(!name) return "Sin archivo"; return name.length>38?name.slice(0,18)+'…'+name.slice(-16):name; }

  function updateCardStatus(card){
    const reqs = Array.from(card.querySelectorAll('input[type="file"][required]'));
    const allOk = reqs.every(i => i.files && i.files.length>0);
    const st = card.querySelector('.doc-text');
    if(st) st.textContent = allOk ? 'Listo' : 'Pendiente';
    card.classList.toggle('ok', allOk);
  }

  function updateFileLabel(input){
    const label = document.querySelector(`.doc-file[data-for="${input.id}"]`);
    if(label){
      const ok = input.files && input.files[0];
      label.textContent = ok ? shortName(input.files[0].name) : 'Sin archivo';
    }
  }

  inputs.forEach(i=>{
    i.addEventListener('change', ()=>{
      updateFileLabel(i);
      updateCardStatus(i.closest('.doc-card'));
      submitBtn.disabled = !allFilesOk();
    });
    updateFileLabel(i);
  });

  document.querySelectorAll('.doc-card').forEach(updateCardStatus);
})();
</script>

<!-- Persona física/moral -->
<script>
(function(){
  const chk = document.getElementById('pfisica');
  const file = document.getElementById('contrato_poder');
  if(!chk || !file) return;

  function lockedByFolio(){
    return document.querySelector('.folio-locked:disabled') !== null;
  }

  function apply(){
    if(!chk.checked){
      file.setAttribute('required','');
      file.disabled = lockedByFolio();
    }else{
      file.value = '';
      file.disabled = true;
      file.removeAttribute('required');
    }
    try { file.dispatchEvent(new Event('change', {bubbles:true})); } catch(e){}
  }

  chk.addEventListener('change', apply);
  document.addEventListener('folio:unlock', apply);
  document.addEventListener('folio:lock', apply);

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', apply);
  } else {
    apply();
  }
})();
</script>

<!-- Menú móvil -->
<script>
(function(){
  const menu = document.getElementById('navInq');
  const nav  = document.querySelector('nav.navbar');
  if(!menu || !nav) return;

  window.toggleNavInq = function(){
    menu.classList.toggle('show');
  };

  document.addEventListener('click', (e)=>{
    if(!nav.contains(e.target)) menu.classList.remove('show');
  }, {passive:true});
  window.addEventListener('resize', ()=>{ if(window.innerWidth >= 992) menu.classList.remove('show'); }, {passive:true});
})();
</script>

</body>
</html>
